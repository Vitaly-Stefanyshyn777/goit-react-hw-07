import{j as a,R as N,r as F}from"./react-Dg5t6M8f.js";import{c as S}from"./react-dom-CiFXIj8w.js";import{F as L,a as E,b as j,E as y}from"./formik-skVJ0l6A.js";import{c as B,a as g}from"./yup-CcIpZKtL.js";import{u as p,a as $,P}from"./react-redux-DxWLRpZB.js";import{c as h,a as I,i as x,b as v}from"./@reduxjs-DF9IRoxF.js";import{a as d}from"./axios-CCb-kr4I.js";import{c as w}from"./reselect-NCCDNIWx.js";import"./hoist-non-react-statics-CuYXql3D.js";import"./react-is-8JwjhRSi.js";import"./scheduler-CzFDRTuY.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-dVqQl90_.js";import"./react-fast-compare-BEmwAo5I.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-BhSZ4xpk.js";import"./use-sync-external-store-BWyuoZKe.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function c(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=c(n);fetch(n.href,o)}})();d.defaults.baseURL="https://6709628baf1a3998baa15a26.mockapi.io";const i=h("contacts/fetchContacts",async(e,t)=>{try{const{data:c}=await d.get("/contacts");return c}catch(c){return t.rejectWithValue(c.message)}}),l=h("contacts/addContact",async(e,t)=>{try{const{data:c}=await d.post("/contacts",e);return c}catch(c){return t.rejectWithValue(c.message)}}),m=h("contacts/deleteContact",async(e,t)=>{try{return await d.delete(`/contacts/${e}`),e}catch(c){return t.rejectWithValue(c.message)}}),u=h("contacts/updateContact",async({contactId:e,updatedData:t},c)=>{try{const{data:r}=await d.put(`/contacts/${e}`,t);return r}catch(r){return c.rejectWithValue(r.message)}}),R="_contactForm_hqqho_1",T="_formBtn_hqqho_15",W="_inputErr_hqqho_31",M="_formInput_hqqho_35",s={contactForm:R,formBtn:T,inputErr:W,formInput:M},O=B({name:g().min(3,"Minimum 3 characters").max(50,"Maximum 50 characters").required("Name is required"),number:g().matches(/^\+?[1-9]\d{1,14}$/,"Invalid phone number").required("Phone number is required")}),A=()=>{const e=p(),t=(c,{resetForm:r})=>{e(l({name:c.name.trim(),number:c.number.trim()})),r()};return a.jsx(L,{initialValues:{name:"",number:""},validationSchema:O,onSubmit:t,children:a.jsxs(E,{className:s.contactForm,children:[a.jsxs("label",{htmlFor:"name",className:s.label,children:["Name",a.jsx(j,{id:"name",name:"name",className:s.formInput,placeholder:"Enter name"}),a.jsx(y,{name:"name",component:"p",className:s.inputError})]}),a.jsxs("label",{htmlFor:"number",className:s.label,children:["Phone Number",a.jsx(j,{id:"number",name:"number",className:s.formInput,placeholder:"Enter phone number"}),a.jsx(y,{name:"number",component:"p",className:s.inputError})]}),a.jsx("button",{type:"submit",className:s.formBtn,children:"Add Contact"})]})})},V="_contactItem_e90q1_1",U="_contactList_e90q1_14",C={contactItem:V,contactList:U},z="_contactCard_tbp18_1",D="_contactInfo_tbp18_18",k="_contactText_tbp18_23",K="_contactBtn_tbp18_29",b={contactCard:z,contactInfo:D,contactText:k,contactBtn:K},G=({user:e})=>{const t=p(),c=()=>{t(m(e.id))};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("p",{className:b.contactText,children:["Name: ",e.name.charAt(0).toUpperCase()+e.name.slice(1)]}),a.jsxs("p",{className:b.contactText,children:["Phone: ",e.number]})]}),a.jsx("button",{className:b.contactBtn,type:"button",onClick:c,children:"Delete"})]})},H={name:""},q=I({name:"filters",initialState:H,reducers:{changeFilter:(e,t)=>{e.name=t.payload}}}),J=e=>e.filters.name,Q=q.reducer,{changeFilter:X}=q.actions,Y={items:[],loading:!1,error:null},Z=I({name:"contacts",initialState:Y,extraReducers:e=>{e.addCase(i.fulfilled,(t,c)=>{t.items=c.payload}).addCase(l.fulfilled,(t,c)=>{t.items.push(c.payload)}).addCase(m.fulfilled,(t,c)=>{t.items=t.items.filter(r=>r.id!==c.payload)}).addCase(u.fulfilled,(t,c)=>{const r=t.items.findIndex(n=>n.id===c.payload.id);r!==-1&&(t.items[r]=c.payload)}).addMatcher(x(i.pending,l.pending,m.pending,u.pending),t=>{t.loading=!0,t.error=null}).addMatcher(x(i.rejected,l.rejected,m.rejected,u.rejected),(t,c)=>{t.loading=!1,t.error=c.payload}).addMatcher(x(i.fulfilled,l.fulfilled,m.fulfilled,u.fulfilled),t=>{t.loading=!1})}}),tt=Z.reducer,et=e=>e.contacts.items,ct=w([et,J],(e,t)=>{const c=t.trim().toLowerCase();return e.filter(r=>r.name.toLowerCase().includes(c))}),at=()=>{const e=$(ct);return e.length?a.jsx("ul",{className:C.contactList,children:e.map(t=>a.jsx("li",{className:C.contactItem,children:a.jsx(G,{user:t})},t.id))}):null},rt=N.memo(at),nt="_serchWrap_1qrzc_1",ot="_serchInput_1qrzc_18",_={serchWrap:nt,serchInput:ot},st=()=>{const e=p(),t=F.useCallback(c=>{const r=c.target.value.trim().toLowerCase();e(X(r))},[e]);return a.jsxs("div",{className:_.serchWrap,children:[a.jsx("label",{htmlFor:"search",className:_.label,children:"Find contact by name"}),a.jsx("input",{id:"search",className:_.serchInput,type:"text",placeholder:"Type to search...",onChange:t,"aria-label":"Search contacts"})]})},it=N.memo(st);function lt(){const e=p();return F.useEffect(()=>{e(i())},[e]),a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"pageTitle",children:"Phonebook"}),a.jsx(A,{}),a.jsx(it,{}),a.jsx(rt,{})]})}const mt=v({reducer:{contacts:tt,filters:Q}});S(document.getElementById("root")).render(a.jsx(P,{store:mt,children:a.jsx(lt,{})}));
